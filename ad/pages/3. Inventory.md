
# Inventory Analysis

```sql inventory_summary
SELECT 
    inventory_date,
    SUM(inventory_tons) as total_inventory_tons,
    SUM(inventory_value) as total_inventory_value,
    SUM(uninvoiced_batches) as total_batches
FROM inventory_position
GROUP BY inventory_date
ORDER BY inventory_date
```





## Inventory by Facility
```sql facility_inventory
SELECT * FROM inventory_position
ORDER BY Facility, inventory_date
```
```sql dec_inventory
SELECT * FROM inventory_position
WHERE inventory_date = '2023-12-31'
ORDER BY inventory_value DESC
```

<BarChart
    data={dec_inventory}
    x=Facility
    y=inventory_value
    title="December 31 Inventory Value by Facility"
    yFmt='$#,##0'
    swapXY=true
/>

Facilities with high inventory values are tying up working capital and may face obsolescence risk. Investigate whether this is strategic safety stock or evidence of production overcapacity relative to demand.

<DataTable data={facility_inventory}>
    <Column id=Facility title="Facility"/>
    <Column id=inventory_date title="Date" fmt='mmm dd, yyyy'/>
    <Column id=uninvoiced_batches title="Batches" fmt='#,##0'/>
    <Column id=inventory_tons title="Tons" fmt='#,##0'/>
    <Column id=inventory_value title="Value" fmt='$#,##0' contentType=colorscale scaleColor=orange/>
</DataTable>

```sql inventory_change
SELECT 
    Facility,
    MAX(CASE WHEN inventory_date = '2023-10-31' THEN inventory_value END) as oct_value,
    MAX(CASE WHEN inventory_date = '2023-12-31' THEN inventory_value END) as dec_value,
    MAX(CASE WHEN inventory_date = '2023-12-31' THEN inventory_value END) - 
    MAX(CASE WHEN inventory_date = '2023-10-31' THEN inventory_value END) as inventory_change
FROM inventory_position
GROUP BY Facility
ORDER BY inventory_change DESC
```


# Production-Sales Alignment

```sql production_gaps
SELECT * FROM production_sales_gap
ORDER BY net_inventory_change DESC
```


Production exceeding sales creates inventory buildup and cash flow pressure. 

**Target:** production should match invoiced volume within 5-10% for healthy operations. Significant gaps require production planning adjustments.

<DataTable data={production_gaps}>
    <Column id=Facility title="Facility"/>
    <Column id=total_produced_tons title="Produced" fmt='#,##0'/>
    <Column id=total_invoiced_tons title="Invoiced" fmt='#,##0'/>
    <Column id=net_inventory_change title="Net Change" fmt='#,##0' contentType=colorscale/>
    <Column id=inventory_rate_pct title="Inventory Rate %" fmt='#0.1"%"' contentType=colorscale scaleColor=orange/>
    <Column id=avg_batch_size_tons title="Avg Batch" fmt='#,##0'/>
</DataTable>

```sql total_gap
SELECT 
    SUM(net_inventory_change) as total_inventory_buildup,
    SUM(total_produced_tons) as total_produced,
    SUM(total_invoiced_tons) as total_invoiced,
    SUM(net_inventory_change) / NULLIF(SUM(total_produced_tons), 0) * 100 as overall_inventory_rate
FROM production_sales_gap
```



<Alert status="warning">

 **Recommendation:**
  Reduce production run rates by 10-15% in Q1 to burn down excess inventory and improve cash conversion.
</Alert>

# Inventory Aging Analysis

```sql aging_summary
SELECT 
    age_bucket,
    COUNT(DISTINCT Production_ID) as batch_count,
    SUM(remaining_inventory_tons) as tons,
    SUM(remaining_inventory_value) as value
FROM inventory_age_analysis
GROUP BY age_bucket
ORDER BY 
    CASE age_bucket
        WHEN 'Never Invoiced' THEN 1
        WHEN '60+ days' THEN 2
        WHEN '31-60 days' THEN 3
        WHEN '8-30 days' THEN 4
        WHEN '0-7 days' THEN 5
    END
```

<BarChart
    data={aging_summary}
    x=age_bucket
    y=value
    title="Inventory Value by Age"
    yFmt='$#,##0'
/>

Aging inventory increases obsolescence risk and reduces working capital efficiency. Focus sales efforts on moving older inventory through promotions or bundling. Inventory over 60 days old should be critically reviewed for write-down risk.**

<DataTable data={aging_summary}>
    <Column id=age_bucket title="Age Bucket"/>
    <Column id=batch_count title="Batches" fmt='#,##0'/>
    <Column id=tons title="Tons" fmt='#,##0'/>
    <Column id=value title="Value" fmt='$#,##0' contentType=colorscale scaleColor=orange/>
</DataTable>

```sql never_invoiced
SELECT 
    SUM(remaining_inventory_value) as never_invoiced_value,
    COUNT(DISTINCT Production_ID) as never_invoiced_batches
FROM inventory_age_analysis
WHERE age_bucket = 'Never Invoiced'
```

```sql old_inventory
SELECT 
    SUM(remaining_inventory_value) as old_inventory_value,
    COUNT(DISTINCT Production_ID) as old_batches
FROM inventory_age_analysis
WHERE age_bucket IN ('60+ days', 'Never Invoiced')
```
<Alert status="warning">

### Critical Concern: 
<Value data={old_inventory} column=old_inventory_value fmt='$#,##0'/> in inventory is 60+ days old or never invoiced. 

### Action Required: 
Investigate these batches immediately for quality issues, demand mismatches, or production errors. 
</Alert>

# Slow-Moving Inventory 

```sql slow_movers
SELECT * FROM inventory_age_analysis
WHERE age_bucket IN ('60+ days', 'Never Invoiced')
ORDER BY remaining_inventory_value DESC
LIMIT 20
```

**These are your highest-risk inventory items - longest time unsold and highest dollar exposure. Prioritize for clearance, repurposing, or write-off decisions.**

<DataTable data={slow_movers}>
    <Column id=Facility title="Facility"/>
    <Column id=Product_Type title="Product"/>
    <Column id=size_shapes title="Size/Shape"/>
    <Column id=production_date title="Produced" fmt='mmm dd, yyyy'/>
    <Column id=days_since_production title="Age (days)" fmt='#,##0' contentType=colorscale scaleColor=red/>
    <Column id=remaining_inventory_tons title="Tons" fmt='#,##0'/>
    <Column id=remaining_inventory_value title="Value" fmt='$#,##0' contentType=colorscale scaleColor=orange/>
</DataTable>

# Production Batch Efficiency

```sql batch_efficiency
SELECT 
    Facility,
    COUNT(*) as batches_with_inventory,
    SUM(remaining_inventory_tons) as total_remaining_tons,
    SUM(remaining_inventory_value) as total_remaining_value,
    AVG(days_to_first_q4_sale) as avg_days_to_sale
FROM production_batch_efficiency
GROUP BY Facility
ORDER BY total_remaining_value DESC
```

Batch efficiency measures how quickly production converts to sales. Faster conversion = better cash flow and lower obsolescence risk. Target should be full batch sellthrough within 30 days of production.

<DataTable data={batch_efficiency}>
    <Column id=Facility title="Facility"/>
    <Column id=batches_with_inventory title="Batches" fmt='#,##0'/>
    <Column id=total_remaining_tons title="Remaining Tons" fmt='#,##0'/>
    <Column id=total_remaining_value title="Remaining Value" fmt='$#,##0' contentType=colorscale scaleColor=orange/>
    <Column id=avg_days_to_sale title="Avg Days to Sale" fmt='#,##0' contentType=colorscale scaleColor=orange/>
</DataTable>

---
